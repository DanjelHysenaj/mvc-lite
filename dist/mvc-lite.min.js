Function("return this")().Config={viewOptions:{templatesFolder:"app"}},function(t){var e={clean:function(t){if(!Array.isArray(t))throw{message:"[Array:Clean] Cannot work with a non-array!"};for(var e=0;e<t.length;e++)void 0===t[e]?(t.splice(e,1),e--):Array.isArray(t[e])&&this.clean(t[e])}};t.Utils=t.Utils||{},t.Utils.Array=e}(Function("return this")()),function(t){var e={get:function(t,e,r){var i=new XMLHttpRequest;if("object"==typeof e.headers)for(var n in e.headers)e.headers.hasOwnProperty(n)&&i.setRequestHeader(n,e.headers[n]);if("object"==typeof e.params){var s="?";for(var o in e.params)e.params.hasOwnProperty(o)&&(s+=o+"="+e.params[o]+"&");t+=s}i.open("GET",t,!0),i.onreadystatechange=function(){200===i.status&&4===i.readyState&&r(JSON.parse(i.responseText))},i.send()},post:function(t,e,r){var i=new XMLHttpRequest;if(i.open("POST",t,!0),"object"==typeof e.headers)for(var n in e.headers)e.headers.hasOwnProperty(n)&&i.setRequestHeader(n,e.headers[n]);"object"==typeof e.body&&(e=e.body),i.onreadystatechange=function(){200===i.status&&4===i.readyState&&r(JSON.parse(i.responseText))},i.send(JSON.stringify(e))}};t.Utils=t.Utils||{},t.Utils.Http=e}(Function("return this")()),function(t){var e={updateObject:function(t,r,i){if(t&&r){var n=0;if("object"==typeof t&&"object"==typeof r)for(var s in r)if(r.hasOwnProperty(s)&&!function(t){if(Array.isArray(i)){for(var e=0;e<i.length;e++)if(t===i[e])return!0}else if(t===i)return!0;return!1}(s))switch(typeof r[s]){case"object":Array.isArray(r[s])?console.warning('[Utils:Object] "updateObject" does not support merging arrays.'):n+=e.updateObject(t[s],r[s]);break;default:t[s]!==r[s]&&(t[s]=r[s],n++)}}return n}};t.Utils=t.Utils||{},t.Utils.Object=e}(Function("return this")()),function(t){var e=function(){this.listeners=[],this.lastMessage=void 0};e.prototype={subscribe:function(t){if("function"==typeof t)return this.listeners.push(t),{unsubscribe:this.unsubscribe.bind(this,t)};console.error(t,"is not a function. Cannot subscribe to Observable.")},unsubscribe:function(t){for(var e=this.listeners.length-1;e>=0;e--)this.listeners[e]===t&&this.listeners.splice(e,1)},next:function(t){this.listeners.forEach(function(e){e(t)}),this.lastMessage=t}},t.Utils=t.Utils||{},t.Utils.Observable=e}(Function("return this")()),function(t){var e={toKeyValueArray:function(t,e){"string"!=typeof e&&(e=",");var r,i=[];return t.split(e).forEach(function(t){r=/([\w-]+): *(.+)/g.exec(t.trim()),i.push({key:r[1],value:r[2]})}),i},toDictionary:function(t,e,r){"string"!=typeof e&&(e=","),"string"!=typeof r&&(r=":");var i,n={};return t.split(e).forEach(function(t){var e=new RegExp("([\\w-]+)"+r+" *(.+)");i=e.exec(t.trim()),Array.isArray(i)&&3===i.length&&(n[i[1]]=i[2])}),n}};t.Utils=t.Utils||{},t.Utils.String=e}(Function("return this")()),function(t){var e=function(t,e){this.viewNode=t,this.self=t.self.cloneNode(!1),Array.isArray(e)&&(this.values=e),this.children=[]};e.prototype.compare=function(t){var r=!1,i=t.$scope;if(Array.isArray(this.viewNode.directives))for(var n,s,o=this.viewNode.directives,a=0,l=0;l<o.length;l++)if(o[l])if(n=o[l].injectable,s=n.getter(o[l].statement,t),n.compare(this.values[l-a],s)){if(s&&Array.isArray(s.array))break;if(!1===s&&void 0===this.self)break}else{if(this.values[l-a]=s,!n.justModify||!this.self){r=!0;break}n.modifier(this,s)}else a++;if(r){var h=this.viewNode.generate(t);this.iteratorValue&&(h.iteratorValue=this.iteratorValue),this.parent.replaceChild(h,this),h.isComponent()&&h.bootstrap(t)}else if(this.multipleNodes){var c,u=this.viewNode,p=this.iterator,f=i[p.varName],d=u.directives[l],v=l;for(u.directives[v]=void 0,l=0;l<p.array.length;l++)i[p.varName]=p.array[l],this.children[l]instanceof e?(this.children[l].compare(t),this.children[l].iteratorValue=p.array[l]):((c=u.generate(t)).iteratorValue=p.array[l],this.appendChild(c),c.isComponent()&&c.bootstrap());var m=l;for(l;l<this.children.length;l++)this.removeChild(this.children[l]);this.children.splice(m,l-m),i[p.varName]=f,u.directives[v]=d}else this.children.forEach(function(e){e.compare(t)})},e.prototype.appendChild=function(t){this.children.push(t),t.parent=this,t.self&&this.self.appendChild(t.self)},e.prototype.replaceChild=function(t,e){if(t.parent=e.parent,t.self&&e.self)this.removeChild(e,t);else if(t.self&&!e.self){var r=this.children.indexOf(e);if(r>=0){this.children.splice(r,1,t);for(var i;!i&&r<this.children.length-1;)this.children[++r].self&&(i=this.children[r].self);i?i.parentNode.insertBefore(t.self,i):this.self&&this.self.appendChild(t.self)}else console.error("CompNode: replaceChild failed, 2nd parameter is not a child of this node.")}else!t.self&&e.self&&this.removeChild(e)},e.prototype.removeChild=function(e,r){if(e.comp instanceof t.Base.Component)e.comp.onDestroy(),delete e.comp;else if(Array.isArray(e.children)){for(var i=0;i<e.children.length;i++)e.removeChild(e.children[i]);e.children.splice(0,e.children.length)}r?(this.children.splice(this.children.indexOf(e),1,r),this.self.replaceChild(r.self,e.self)):e.self&&(this.self.removeChild(e.self),e.self=void 0)},e.prototype.isComponent=function(){return this.self&&1===this.self.nodeType&&(this.viewNode.controller||"string"==typeof this.self.getAttribute("controller"))&&!this.iterator},e.prototype.bootstrap=function(e){this.comp=t.Core.Bootstrap(this.self,e,this.inputs),this.self=this.comp.nodeTree.self},t.Base=t.Base||{},t.Base.CompNode=e}(Function("return this")()),function(t){var e=function(t,r,i){this.el=t,r instanceof e&&(this.parent=r,r.children=r.children||[],r.children.push(this)),this.$scope=i};e.prototype.setView=function(t){this.el.parentNode.replaceChild(t.self,this.el),this.nodeTree=t,this.el=t.self},e.prototype.update=function(){this.nodeTree instanceof t.Base.CompNode&&this.nodeTree.compare(this)},e.prototype.getInput=function(t,e){return this.inputs&&this.inputs.hasOwnProperty(t)?this.inputs[t]:e},e.prototype.onDestroy=function(){if(Array.isArray(this.children))for(;this.children.length>0;)this.children[0].onDestroy();Array.isArray(this.subscriptions)&&this.subscriptions.forEach(function(t){t.unsubscribe()}),this.parent instanceof e&&this.parent.children.splice(this.parent.children.indexOf(this),1)},t.Base=t.Base||{},t.Base.Component=e}(Function("return this")()),function(t){var e=function(t,e,r){this.name=t,this.view=e,this.constructor=r};e.prototype.generateComponent=function(e,r,i){var n={},s=new t.Base.Component(e,r,n);return e.innerHTML.length>0&&(s.subView=new t.Base.View("content-outlet",null,e.innerHTML)),"object"==typeof i&&(s.inputs=i),n.getInput=function(t,e){n[t]=this.getInput(t,e)}.bind(s),n.addSubscription=function(){this.subscriptions=this.subscriptions||[];for(var t=0;t<arguments.length;t++)this.subscriptions.push(arguments[t])}.bind(s),this.constructor.call(this,n,s.update.bind(s)),s.setView(this.view.generate(s)),s},t.Base=t.Base||{},t.Base.Controller=e}(Function("return this")()),function(global){var TAG="[Injectable]",Injectable=function(t,e){this.name=t;try{this.modifier=e.modifier.bind(this)}catch(t){console.error(TAG,this.name+": No modifier set.")}"function"==typeof e.getter&&(this.getter=e.getter.bind(this)),"function"==typeof e.compare&&(this.compare=e.compare.bind(this)),this.keepAttribute=!!e.keepAttribute,this.justModify=!!e.justModify,this.useComponentInGetter=!!e.useComponentInGetter};Injectable.prototype.getter=function(statement,comp){var result;try{with(comp.$scope)result=eval(statement)}catch(t){console.error(TAG,this.name+":","Couldn't evaluate '"+statement+"'.")}return result},Injectable.prototype.compare=function(t,e){if(t===e)return!0},global.Base=global.Base||{},global.Base.Injectable=Injectable}(Function("return this")()),function(t){var e=function(t,e){this.name=t,this.initFunc=e,this.events={},this.init()};e.prototype.init=function(){if(this.data=[],"function"!=typeof this.initFunc)throw{message:this.name+": Couldn't initialize the model (initFunc err)"};this.initFunc(function(t,e){this.setData(t,!!e)}.bind(this))},e.prototype.setData=function(t,e,r){if((e=!!e)&&this.data)for(var i=0;i<t.length;i++)this.data.push(t[i]);else this.data=t;this.emit(r||"setData",this.data)},e.prototype.emit=function(){for(var t,e=[],r=0;r<arguments.length;r++)0===r?t=arguments[r]:e.push(arguments[r]);if(Array.isArray(this.events[t]))for(var i=0;i<this.events[t].length;i++)this.events[t][i].apply(void 0,e)},e.prototype.subscribe=function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),{unsubscribe:function(t,e){var r=this.events[t].indexOf(e);this.events[t].splice(r,1)}.bind(this,t,e)}},t.Base=t.Base||{},t.Base.Model=e}(Function("return this")()),function(t){var e=function(t){if(!t.hasOwnProperty("path"))throw{message:"[Route] Route must have a path."};if(this.path=t.path.split("/"),t.hasOwnProperty("controller"))this.controller=t.controller;else{if(!t.hasOwnProperty("redirect"))throw{message:"[Route] Route must have a controller."};this.redirect=t.redirect}Array.isArray(t.children)&&(this.children=t.children.map(function(t){return new e(t)}))};e.prototype.checkUrl=function(t,e){var r=0;if(this.path.length>t.length)return!1;for(var i=0;i<this.path.length;i++)this.path[i]===t[i]&&r++;if(this.path.length===r){if(this.redirect)return{redirect:this.redirect};if(Array.isArray(e)||(e=[]),e.push(this.controller),this.path.length<t.length){if(!Array.isArray(this.children))return!1;var n=!1;for(t.splice(0,r),i=0;i<this.children.length;i++)if(this.children[i].checkUrl(t,e)){n=e;break}return n}if(Array.isArray(this.children))for(var s=this.children.filter(function(t){return 1===t.path.length&&""===t.path[0]});Array.isArray(s)&&s.length>0;)s=s[0],e.push(s.controller),Array.isArray(s.children)&&(s=s.children.filter(function(t){return 0===t.path.length}));return{controllers:e}}return!1},t.Base=t.Base||{},t.Base.Route=e}(Function("return this")()),function(t){var e=t.Config.viewOptions,r=function(t,e,r){this.name=t,r?this.templateSrc=r:this.loadTemplate(e),this.buildNodeTree()};r.prototype.loadTemplate=function(t){var r=e.templatesFolder+"/"+t+this.name+".html";r=r.replace(/\/\//g,"/"),this.templateSrc=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.responseText}(r)},r.prototype.buildNodeTree=function(){function e(r){for(var i,n=new t.Base.ViewNode(r),s=0;s<r.childNodes.length;s++)(i=e(r.childNodes[s])).parent=n,n.children.push(i);return n}var r=document.createElement("temp");r.innerHTML=this.templateSrc;for(var i=new t.Base.ViewNode(document.createElement(this.name)),n=0;n<r.childNodes.length;n++)i.children.push(e(r.childNodes[n]));this.nodeTree=i},r.prototype.generate=function(e){for(var r=new t.Base.CompNode(this.nodeTree),i=0;i<this.nodeTree.children.length;i++)r.appendChild(this.nodeTree.children[i].generate(e));return r},t.Base=t.Base||{},t.Base.View=r}(Function("return this")()),function(t){var e=function(t){this.self=t,this.children=[],this.parseNode()};e.prototype.parseNode=function(){var e=this.self.attributes;if(e&&e.length>0)for(var r=0;r<e.length;r++)if("controller"===e[r].name)this.controller=e[r].value;else{var i=t.App.getInjectable(e[r].name);i instanceof t.Base.Injectable&&(Array.isArray(this.directives)||(this.directives=[]),this.directives.push({injectable:i,statement:e[r].value}),i.keepAttribute||(this.self.removeAttribute(e[r].name),r--))}},e.prototype.generate=function(e){var r=new t.Base.CompNode(this),i=e.$scope;if(Array.isArray(this.directives)){var n,s;for(r.values=[],s=0;s<this.directives.length&&r.self;s++)if(this.directives[s]){var o=(n=this.directives[s]).injectable.getter(n.statement,e);if(n.injectable.modifier(r,o),r.values.push(o),r.multipleNodes)break}}if(r.self)if(r.multipleNodes){var a,l=r.iterator.array,h=i[r.iterator.varName],c=this.directives[s],u=s;for(this.directives[s]=void 0,s=0;s<l.length;s++)i[r.iterator.varName]=l[s],(a=this.generate(e)).iteratorValue=l[s],r.appendChild(a),a.isComponent()&&a.bootstrap(e);i[r.iterator.varName]=h,this.directives[u]=c}else!function(t,r){for(var i,n=0;n<t.children.length;n++)i=t.children[n].generate(e),r.appendChild(i),i.replaceSelfWith&&(i.self.parentNode.replaceChild(i.replaceSelfWith.self,i.self),delete i.replaceSelfWith),i.isComponent()&&i.bootstrap(e)}(this,r);return r},t.Base=t.Base||{},t.Base.ViewNode=e}(Function("return this")()),function(t){function e(e){var r=e.getAttribute("controller");if("string"==typeof r){var i=t.App.getController(r);if(i instanceof t.Base.Controller)return i}}t.Core=t.Core||{},t.Core.Bootstrap=function(r,i,n){if(1===r.nodeType){var s=e(r);if(s instanceof t.Base.Controller)return s.generateComponent(r,i,n);throw{message:"Controller "+r.getAttribute("controller")+" not found."}}throw{message:"Cannot bootstrap a non-element object."}}}(Function("return this")()),function(t){var e,r=function(r){if(e)return e;if(!Array.isArray(r))throw{message:"[Router] 'routes' should be an array of routes."};window.onhashchange=function(){this.navigating||this.navigateTo(location.hash),this.navigating=!1}.bind(this);try{this.routes=r.map(function(e){return new t.Base.Route(e)})}catch(t){throw t}this.navigations=0,e=this,this.navigateTo(location.hash)};r.prototype.navigateTo=function(e){if("#"===e[0]&&(e="/"!==e[1]?e.slice(1,e.length):e.slice(2,e.length)),e!==this.currentPath){this.navigations++,this.lastPath=this.currentPath||e,this.currentPath=e;var r=this.parseUrl(e);if(r){var i=r.results;i.redirect?this.navigateTo(i.redirect):("string"==typeof r.params&&r.params.length>0&&(r.params=t.Utils.String.toDictionary(r.params,"&","=")),history.replaceState(null,"","#/"+e),this.stateChange(r))}else console.error("UNKNOWN ROUTE "+e)}},r.prototype.parseUrl=function(t){var e=t.split("?"),r=e[1];e=e[0].split("/").filter(function(t){return"#"!==t});for(var i,n=0;n<this.routes.length&&!i;n++)i=this.routes[n].checkUrl(e);return!!i&&{results:i,params:r}},r.prototype.stateChange=function(e){var r=e.results;if(this.state){for(var i,n=0;n<r.controllers.length;n++)if(r.controllers[n]!==this.state.controllers[n]){for(var s=n;s<r.controllers.length;s++)this.state.controllers[s]=r.controllers[s];s<this.state.controllers.length&&this.state.controllers.splice(s,this.state.controllers.length),this.state.nextController=r.controllers[n],i=this.state.compNodes[n];break}if("object"==typeof e.params){for(var o in e.params)e.params.hasOwnProperty(o)&&this.updateParam(o,e.params[o]);for(o in this.state.params)this.state.params.hasOwnProperty(o)&&(e.params[o]||this.updateParam(o))}else{var a=this.state.params;if("object"==typeof a)for(o in a)a.hasOwnProperty(o)&&this.updateParam(o)}if(i instanceof t.Base.CompNode){var l=i.comp,h=i.viewNode.generate(l);i.parent.replaceChild(h,i),h.bootstrap(l.parent)}}else this.state={controllers:r.controllers,params:e.params,nextController:r.controllers[0]}},r.prototype.nextController=function(t){if(this.state&&this.state.nextController){var e=this.state.nextController;this.state.nextController=void 0;for(var r=0;r<this.state.controllers.length;r++)if(e===this.state.controllers[r]){Array.isArray(this.state.compNodes)||(this.state.compNodes=[]),this.state.nextController=this.state.controllers[r+1],this.state.compNodes[r]=t;break}return e}console.error("[Router]","Failed to load next controller, end of list.")},r.prototype.updateParam=function(e,r){var i=this.params(),n=0;if(i[e]!==r&&(r&&0!==r.length?i[e]=r:delete i[e],n++,this.paramSubscriptions)){var s=this.paramSubscriptions[e];s instanceof t.Utils.Observable&&s.next(r)}if(n>0){this.navigating=!0;var o=location.hash;o=o.split("?")[0]+"?";for(var a in i)i.hasOwnProperty(a)&&(o+=a+"="+i[a]+"&");location.hash=o.substr(0,o.length-1),this.currentPath=location.hash.substr(2,location.hash.length)}this.state&&(this.state.params=i)},r.prototype.subscribeToParam=function(e,r){"object"!=typeof this.paramSubscriptions&&(this.paramSubscriptions={});var i=this.paramSubscriptions;i[e]instanceof t.Utils.Observable||(i[e]=new t.Utils.Observable);var n=i[e].subscribe(r);return this.state&&this.state.params&&r(this.state.params[e]),n},r.prototype.isLandingPage=function(){return this.lastPath===this.currentPath&&1===this.navigations},r.prototype.params=function(){return this.state&&"object"==typeof this.state.params?this.state.params:{}},t.Core=t.Core||{},t.Core.Router=r}(Function("return this")()),function(t){var e,r={},i={},n={};t.App={getController:function(t){return r[t]},getInjectable:function(t){return i[t]},getModel:function(t){return n[t]},Bootstrap:function(e){var r="[Bootstrap]",i=document.querySelector('*[controller="'+e+'"]');if(i&&1===i.nodeType){try{var n=t.Core.Bootstrap(i)}catch(t){console.error(r,t.message)}return n}console.error(r,"Could not find placeholder for '"+e+"'.")},Controller:function(e,i,n){try{var s=new t.Base.View(e,i);r[e]=new t.Base.Controller(e,s,n)}catch(t){console.error("[Controller]",t.message)}},Injectable:function(e,r){try{i[e]=new t.Base.Injectable(e,r)}catch(t){console.error("[Injectable]",t.message)}},Model:function(e,r){try{n[e]=new t.Base.Model(e,r)}catch(t){console.error("[Model]",t.message)}},Router:function(r){return e||(e=new t.Core.Router(r)),e}}}(Function("return this")()),function(global){global.App.Injectable("bind-class",{justModify:!0,getter:function(statement,comp){var classes=global.Utils.String.toDictionary(statement),value;try{with(comp.$scope)for(var className in classes)classes.hasOwnProperty(className)&&(value=eval(classes[className]),classes[className]=!!value)}catch(t){throw{message:this.name+": "+t.message}}return classes},modifier:function(t,e){var r=0;for(var i in e)e.hasOwnProperty(i)&&(e[i]?(t.self.classList.add(i),r++):t.self.classList.remove(i));0===r&&0===t.self.classList.length&&t.self.removeAttribute("class")}})}(Function("return this")()),function(global){global.App.Injectable("bind-if",{getter:function(statement,comp){var result;try{with(comp.$scope)result=eval(statement)}catch(t){throw this.name+": Couldn't evaluate '"+statement+"'."}return!!result},modifier:function(t,e){e||(t.self=void 0)}})}(Function("return this")()),Function("return this")().App.Injectable("content-outlet",{getter:function(t,e){return e},modifier:function(t,e){e.subView&&(t.replaceSelfWith=e.subView.generate(e.parent))}}),function(global){global.App.Injectable("bind-events",{getter:function(statement,comp){var events=global.Utils.String.toDictionary(statement),matches,funcName,variables;for(var event in events)if(events.hasOwnProperty(event)){var regEx=new RegExp("^(.+)\\((.*)\\)$");if(matches=events[event].match(regEx),!Array.isArray(matches)||matches.length<2)throw this.name+": Invalid statement, expecting: [event: func()]";funcName=matches[1],variables=matches[2].split(",");for(var i=0;i<variables.length;i++)try{with(comp.$scope)variables[i]=eval(variables[i])}catch(t){throw this.name+": "+t.message}events[event]=function(funcName,variables,el){var func;try{with(comp.$scope)func=eval(funcName)}catch(t){throw this.name+": "+t.message}"function"==typeof func&&func.apply(el,variables)}.bind(this,funcName,variables)}return events},modifier:function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.self.addEventListener(r,function(t,e){e&&e.preventDefault&&e.preventDefault();try{t(e.currentTarget)}catch(t){console.error("[Injectable]",t)}}.bind(this,e[r]))},compare:function(t,e){return!0}})}(Function("return this")()),function(global){global.App.Injectable("input",{getter:function(statement,comp){var inputs=global.Utils.String.toDictionary(statement);try{for(var input in inputs)if(inputs.hasOwnProperty(input))with(comp.$scope)inputs[input]=eval(inputs[input])}catch(t){throw{message:this.name+": "+t.message}}return inputs},modifier:function(t,e){t.inputs=e},compare:function(t,e){var r=!0;for(var i in e)if(e.hasOwnProperty(i)&&e[i]!==t[i]){r=!1;break}return r}})}(Function("return this")()),function(global){global.App.Injectable("bind-for",{getter:function(statement,comp){for(var words=statement.split(" "),result={},w=0;w<words.length;w++)if("in"===words[w]&&w>0&&w<words.length-1){try{with(comp.$scope)result.array=eval(words[w+1])}catch(t){throw t}result.varName=words[w-1]}return result},modifier:function(t,e){t.self=document.createElement("iterator"),t.multipleNodes=!0,t.iterator=e},compare:function(t,e){return t.array===e.array}})}(Function("return this")()),function(t){t.App.Injectable("router-outlet",{getter:function(t,e){return!0},modifier:function(e,r){var i=t.App.Router().nextController(e);t.App.getController(i)instanceof t.Base.Controller&&e.self.setAttribute("controller",i)}})}(Function("return this")()),Function("return this")().App.Injectable("bind-value",{justModify:!0,modifier:function(t,e){t.self.innerHTML=e}});