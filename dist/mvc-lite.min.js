Function("return this")().Config={viewOptions:{templatesFolder:"app"}},function(e){var t={get:function(e,t,r){var n=new XMLHttpRequest;if("object"==typeof t.headers)for(var i in t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);if("object"==typeof t.params){var s="?";for(var o in t.params)t.params.hasOwnProperty(o)&&(s+=o+"="+t.params[o]+"&");e+=s}n.open("GET",e,!0),n.onreadystatechange=function(){200===n.status&&4===n.readyState&&r(JSON.parse(n.responseText))},n.send()},post:function(e,t,r){var n=new XMLHttpRequest;if(n.open("POST",e,!0),"object"==typeof t.headers)for(var i in t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);"object"==typeof t.body&&(t=t.body),n.onreadystatechange=function(){200===n.status&&4===n.readyState&&r(JSON.parse(n.responseText))},n.send(JSON.stringify(t))}};e.Utils=e.Utils||{},e.Utils.Http=t}(Function("return this")()),function(e){var t={updateObject:function(e,r,n){var i=0;if("object"==typeof e&&"object"==typeof r)for(var s in r)if(r.hasOwnProperty(s)&&!function(e){if(Array.isArray(n)){for(var t=0;t<n.length;t++)if(e===n[t])return!0}else if(e===n)return!0;return!1}(s))switch(typeof r[s]){case"object":i+=t.updateObject(e[s],r[s]);break;default:e[s]!==r[s]&&(e[s]=r[s],i++)}return i}};e.Utils=e.Utils||{},e.Utils.Object=t}(Function("return this")()),function(e){var t=function(){this.listeners=[],this.lastMessage=void 0};t.prototype={subscribe:function(e){if("function"==typeof e)return this.listeners.push(e),{unsubscribe:this.unsubscribe.bind(this,e)};console.error(e,"is not a function. Cannot subscribe to Observable.")},unsubscribe:function(e){for(var t=this.listeners.length-1;t>=0;t--)this.listeners[t]===e&&this.listeners.splice(t,1)},next:function(e){this.listeners.forEach(function(t){t(e)}),this.lastMessage=e}},e.Utils=e.Utils||{},e.Utils.Observable=t}(Function("return this")()),function(e){e.Utils=e.Utils||{},e.Utils.String={toKeyValueArray:function(e,t){"string"!=typeof t&&(t=",");var r,n=[];return e.split(t).forEach(function(e){r=/([\w-]+): *(.+)/g.exec(e.trim()),n.push({key:r[1],value:r[2]})}),n},toDictionary:function(e,t){"string"!=typeof t&&(t=",");var r,n={};return e.split(t).forEach(function(e){r=/([\w-]+): *(.+)/g.exec(e.trim()),n[r[1]]=r[2]}),n}}}(Function("return this")()),function(e){var t=function(e,t){this.viewNode=e,this.self=e.self.cloneNode(!1),Array.isArray(t)&&(this.values=t),this.children=[]};t.prototype.compare=function(e){var r=!1;if(Array.isArray(this.viewNode.directives))for(var n,i,s=this.viewNode.directives,o=0,a=0;a<s.length;a++)if(s[a])if(n=s[a].injectable,i=n.getter(s[a].statement,e),n.compare(this.values[a-o],i)){if(i&&Array.isArray(i.array))break}else{if(this.values[a-o]=i,!n.justModify||!this.self){r=!0;break}n.modifier(this,i)}else o++;if(r){var l=this.viewNode.generate(e);this.iteratorValue&&(l.iteratorValue=this.iteratorValue),this.parent.replaceChild(l,this),l.isComponent()&&l.bootstrap()}else if(this.multipleNodes){var c,h=this.viewNode,u=this.iterator,f=e[u.varName],p=h.directives[a],d=a;for(h.directives[d]=void 0,a=0;a<u.array.length;a++)e[u.varName]=u.array[a],this.children[a]instanceof t?(this.children[a].compare(e),this.children[a].iteratorValue=u.array[a]):((c=h.generate(e)).iteratorValue=u.array[a],this.appendChild(c));e[u.varName]=f,h.directives[d]=p}else this.children.forEach(function(t){t.compare(e)})},t.prototype.appendChild=function(e){this.children.push(e),e.parent=this,e.self&&this.self.appendChild(e.self)},t.prototype.replaceChild=function(e,t){if(e.parent=t.parent,e.self&&t.self)this.self.replaceChild(e.self,t.self),this.children.splice(this.children.indexOf(t),1,e);else if(e.self&&!t.self){var r=this.children.indexOf(t);if(r>=0){this.children.splice(r,1,e);for(var n;!n&&r<this.children.length-1;)this.children[++r].self&&(n=this.children[r].self);n?n.parentNode.insertBefore(e.self,n):this.self.appendChild(e.self)}else console.error("CompNode: replaceChild failed, 2nd parameter is not a child of this node.")}else!e.self&&t.self&&this.removeChild(t)},t.prototype.removeChild=function(e){this.self.removeChild(e.self),e.self=void 0,e.children.splice(0,e.children.length)},t.prototype.isComponent=function(){return this.self&&1===this.self.nodeType&&(this.viewNode.controller||"string"==typeof this.self.getAttribute("controller"))&&!this.iterator},t.prototype.bootstrap=function(){this.comp=e.Core.Bootstrap(this.self,this.inputs),this.self=this.comp.nodeTree.self},e.Base=e.Base||{},e.Base.CompNode=t}(Function("return this")()),function(e){var t=function(e,t){this.el=e,this.$scope=t};t.prototype.setView=function(e){this.el.parentNode.replaceChild(e.self,this.el),this.nodeTree=e,this.el=e.self},t.prototype.update=function(){this.nodeTree.compare(this.$scope)},t.prototype.getInput=function(e){if(this.inputs&&this.inputs.hasOwnProperty(e))return this.inputs[e];throw{message:"Input "+e+" doesn't exist."}},e.Base=e.Base||{},e.Base.Component=t}(Function("return this")()),function(e){var t=function(e,t,r){this.name=e,this.view=t,this.constructor=r};t.prototype.generateComponent=function(t,r){var n={},i=new e.Base.Component(t,n);return"object"==typeof r&&(i.inputs=r),n.getInput=function(e){n[e]=this.getInput(e)}.bind(i),this.constructor.call(this,n,i.update.bind(i)),i.setView(this.view.generate(n)),i},e.Base=e.Base||{},e.Base.Controller=t}(Function("return this")()),function(global){var TAG="[Injectable]",Injectable=function(e,t){this.name=e;try{this.modifier=t.modifier.bind(this)}catch(e){console.error(TAG,this.name+": No modifier set.")}"function"==typeof t.getter&&(this.getter=t.getter.bind(this)),"function"==typeof t.compare&&(this.compare=t.compare.bind(this)),this.keepAttribute=!!t.keepAttribute,this.justModify=!!t.justModify};Injectable.prototype.getter=function(statement,$scope){var result;try{with($scope)result=eval(statement)}catch(e){console.error(TAG,this.name+":","Couldn't evaluate '"+statement+"'.")}return result},Injectable.prototype.compare=function(e,t){if(e===t)return!0},global.Base=global.Base||{},global.Base.Injectable=Injectable}(Function("return this")()),function(e){var t=function(e,t){this.name=e,this.initFunc=t,this.events={},this.init()};t.prototype.init=function(){if("function"!=typeof this.initFunc)throw{message:this.name+": Couldn't initialize the model (initFunc err)"};this.initFunc(function(e){this.setData(e)}.bind(this))},t.prototype.setData=function(e,t){this.data=e,this.emit(t||"setData",e)},t.prototype.emit=function(){for(var e,t=[],r=0;r<arguments.length;r++)0===r?e=arguments[r]:t.push(arguments[r]);if(Array.isArray(this.events[e]))for(var n=0;n<this.events[e].length;n++)this.events[e][n].apply(void 0,t)},t.prototype.subscribe=function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),{unsubscribe:function(e){this.events.splice(this.events.indexOf(e),1)}.bind(this,t)}},e.Base=e.Base||{},e.Base.Model=t}(Function("return this")()),function(e){var t=function(e){if(!e.hasOwnProperty("path"))throw{message:"[Route] Route must have a path."};if(this.path=e.path.split("/"),e.hasOwnProperty("controller"))this.controller=e.controller;else{if(!e.hasOwnProperty("redirect"))throw{message:"[Route] Route must have a controller."};this.redirect=e.redirect}Array.isArray(e.children)&&(this.children=e.children.map(function(e){return new t(e)}))};t.prototype.checkUrl=function(t,r){var n=0;if(this.path.length>t.length)return!1;for(var i=0;i<this.path.length;i++)this.path[i]===t[i]&&n++;if(this.path.length===n){if(this.redirect)return e.Core.Router().navigateTo(this.redirect),!1;if(Array.isArray(r)||(r=[]),r.push(this.controller),this.path.length<t.length){if(!Array.isArray(this.children))return!1;var s=!1;for(t.splice(0,n),i=0;i<this.children.length;i++)if(this.children[i].checkUrl(t,r)){s=r;break}return s}if(Array.isArray(this.children))for(var o=this.children.filter(function(e){return 1===e.path.length&&""===e.path[0]});Array.isArray(o)&&o.length>0;)o=o[0],r.push(o.controller),Array.isArray(o.children)&&(o=o.children.filter(function(e){return 0===e.path.length}));return r}return!1},e.Base=e.Base||{},e.Base.Route=t}(Function("return this")()),function(e){var t=e.Config.viewOptions,r=function(e,t){this.name=e,this.loadTemplate(t),this.buildNodeTree()};r.prototype.loadTemplate=function(e){var r=t.templatesFolder+"/"+e+this.name+".html";r=r.replace(/\/\//g,"/"),this.templateSrc=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.responseText}(r)},r.prototype.buildNodeTree=function(){function t(r){for(var n,i=new e.Base.ViewNode(r),s=0;s<r.childNodes.length;s++)(n=t(r.childNodes[s])).parent=i,i.children.push(n);return i}var r=document.createElement("temp");r.innerHTML=this.templateSrc;for(var n=new e.Base.ViewNode(document.createElement(this.name)),i=0;i<r.childNodes.length;i++)n.children.push(t(r.childNodes[i]));this.nodeTree=n},r.prototype.generate=function(t){for(var r=new e.Base.CompNode(this.nodeTree),n=0;n<this.nodeTree.children.length;n++)r.appendChild(this.nodeTree.children[n].generate(t,r));return r},e.Base=e.Base||{},e.Base.View=r}(Function("return this")()),function(e){var t=function(e){this.self=e,this.children=[],this.parseNode()};t.prototype.parseNode=function(){var t=this.self.attributes;if(t&&t.length>0)for(var r=0;r<t.length;r++)if("controller"===t[r].name)this.controller=t[r].value;else{var n=e.App.getInjectable(t[r].name);n instanceof e.Base.Injectable&&(Array.isArray(this.directives)||(this.directives=[]),this.directives.push({injectable:n,statement:t[r].value}),n.keepAttribute||(this.self.removeAttribute(t[r].name),r--))}},t.prototype.generate=function(t){var r=new e.Base.CompNode(this);if(Array.isArray(this.directives)){var n,i;for(r.values=[],i=0;i<this.directives.length&&r.self;i++)if(this.directives[i]){var s=(n=this.directives[i]).injectable.getter(n.statement,t);if(n.injectable.modifier(r,s),r.values.push(s),r.multipleNodes)break}}if(r.self)if(r.multipleNodes){var o,a=r.iterator.array,l=t[r.iterator.varName],c=this.directives[i],h=i;this.directives[i]=void 0;for(i=0;i<a.length;i++)t[r.iterator.varName]=a[i],(o=this.generate(t)).iteratorValue=a[i],o.self&&0,r.appendChild(o),o.isComponent()&&o.bootstrap();t[r.iterator.varName]=l,this.directives[h]=c}else!function(e,r){for(var n,i=0;i<e.children.length;i++)n=e.children[i].generate(t,r),r.appendChild(n),n.isComponent()&&n.bootstrap()}(this,r);return r},e.Base=e.Base||{},e.Base.ViewNode=t}(Function("return this")()),function(e){function t(t){var r=t.getAttribute("controller");if("string"==typeof r){var n=e.App.getController(r);if(n instanceof e.Base.Controller)return n}}e.Core=e.Core||{},e.Core.Bootstrap=function(r,n){if(1===r.nodeType){var i=t(r);if(i instanceof e.Base.Controller)return i.generateComponent(r,n);throw{message:"Controller "+r.getAttribute("controller")+" not found."}}throw{message:"Cannot bootstrap a non-element object."}}}(Function("return this")()),function(e){var t,r=function(r){if(t)return t;if(!Array.isArray(r))throw{message:"[Router] 'routes' should be an array of routes."};window.onhashchange=function(){this.navigateTo(window.location.hash)}.bind(this);try{this.routes=r.map(function(t){return new e.Base.Route(t)})}catch(e){throw e}t=this,this.navigateTo(location.hash)};r.prototype.navigateTo=function(e){if("#"===e[0]?"/"!==e[1]?(e=e.slice(1,e.length),history.pushState(null,"","#/"+e)):e=e.slice(2,e.length):history.pushState(null,"","#/"+e),e!==this.currentPath){this.currentPath=e;var t=this.parseUrl(e);if(t){if(t.params){for(var r=t.params.split("&"),n={},i=0;i<r.length;i++)r[i]=r[i].split("="),n[r[i][0]]=r[i][1];this.params=n}this.stateChange(t)}}},r.prototype.stateChange=function(e){if(this.state){for(var t,r=0;r<e.controllers.length;r++)if(e.controllers[r]!==this.state.controllers[r]){for(var n=r;n<e.controllers.length;n++)this.state.controllers[n]=e.controllers[n];n<this.state.controllers.length&&this.state.controllers.splice(n,this.state.controllers.length),this.state.nextController=e.controllers[r],t=this.state.compNodes[r];break}var i=t.comp,s=t.viewNode.generate(i.$scope);t.parent.replaceChild(s,t),s.bootstrap()}else this.state={controllers:e.controllers,nextController:e.controllers[0]}},r.prototype.parseUrl=function(e){var t=e.split("?"),r=t[1];t=t[0].split("/").filter(function(e){return"#"!==e});for(var n,i=0;i<this.routes.length&&!n;i++)n=this.routes[i].checkUrl(t);return!!n&&{controllers:n,params:r}},r.prototype.nextController=function(e){if(this.state&&this.state.nextController){var t=this.state.nextController;this.state.nextController=void 0;for(var r=0;r<this.state.controllers.length;r++)if(t===this.state.controllers[r]){Array.isArray(this.state.compNodes)||(this.state.compNodes=[]),this.state.nextController=this.state.controllers[r+1],this.state.compNodes[r]=e;break}return t}console.error("[Router]","Failed to load next controller, end of list.")},e.Core=e.Core||{},e.Core.Router=r}(Function("return this")()),function(e){var t={},r={},n={};e.App={getController:function(e){return t[e]},getInjectable:function(e){return r[e]},getModel:function(e){return n[e]},Bootstrap:function(t){var r="[Bootstrap]",n=document.querySelector('*[controller="'+t+'"]');if(n&&1===n.nodeType){try{var i=e.Core.Bootstrap(n)}catch(e){console.error(r,e.message)}return i}console.error(r,"Could not find placeholder for '"+t+"'.")},Controller:function(r,n,i){try{var s=new e.Base.View(r,n);t[r]=new e.Base.Controller(r,s,i)}catch(e){console.error("[Controller]",e.message)}},Injectable:function(t,n){try{r[t]=new e.Base.Injectable(t,n)}catch(e){console.error("[Injectable]",e.message)}},Model:function(t,r){try{n[t]=new e.Base.Model(t,r)}catch(e){console.error("[Model]",e.message)}}}}(Function("return this")()),function(global){global.App.Injectable("bind-class",{justModify:!0,getter:function(statement,$scope){var classes=global.Utils.String.toDictionary(statement),value;try{with($scope)for(var className in classes)classes.hasOwnProperty(className)&&(value=eval(classes[className]),classes[className]=!!value)}catch(e){throw{message:this.name+": "+e.message}}return classes},modifier:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(t[r]?e.self.classList.add(r):e.self.classList.remove(r))}})}(Function("return this")()),function(global){global.App.Injectable("bind-if",{getter:function(statement,$scope){var result;try{with($scope)result=eval(statement)}catch(e){throw this.name+": Couldn't evaluate '"+statement+"'."}return!!result},modifier:function(e,t){t||(e.self=void 0)}})}(Function("return this")()),function(global){global.App.Injectable("bind-events",{getter:function(statement,$scope){var events=global.Utils.String.toDictionary(statement),matches,funcName,variables;for(var event in events)if(events.hasOwnProperty(event)){var regEx=new RegExp("^(.+)\\((.*)\\)$");matches=events[event].match(regEx),funcName=matches[1],variables=matches[2].split(",");for(var i=0;i<variables.length;i++)try{with($scope)variables[i]=eval(variables[i])}catch(e){throw this.name+": "+e.message}events[event]=function(funcName,variables){var func;try{with($scope)func=eval(funcName);func.apply(void 0,variables)}catch(e){throw this.name+": "+e.message}}.bind(this,funcName,variables)}return events},modifier:function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.self.addEventListener(r,function(e,t){t&&t.preventDefault&&t.preventDefault();try{e()}catch(e){console.error("[Injectable]",e)}}.bind(this,t[r]))},compare:function(e,t){return!0}})}(Function("return this")()),function(global){global.App.Injectable("input",{getter:function(statement,$scope){var inputs=global.Utils.String.toDictionary(statement);try{for(var input in inputs)if(inputs.hasOwnProperty(input))with($scope)inputs[input]=eval(inputs[input])}catch(e){throw{message:this.name+": "+e.message}}return inputs},modifier:function(e,t){e.inputs=t},compare:function(e,t){var r=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]!==e[n]){r=!1;break}return r}})}(Function("return this")()),function(global){global.App.Injectable("bind-for",{getter:function(statement,$scope){for(var words=statement.split(" "),result={},w=0;w<words.length;w++)if("in"===words[w]&&w>0&&w<words.length-1){try{with($scope)result.array=eval(words[w+1])}catch(e){throw e}result.varName=words[w-1]}return result},compare:function(e,t){return e.array===t.array},modifier:function(e,t){e.self=document.createElement("iterator"),e.multipleNodes=!0,e.iterator=t}})}(Function("return this")()),function(e){e.App.Injectable("router-outlet",{getter:function(e,t){return!0},modifier:function(t,r){var n=e.Core.Router().nextController(t);e.App.getController(n)instanceof e.Base.Controller&&t.self.setAttribute("controller",n)}})}(Function("return this")()),Function("return this")().App.Injectable("bind-value",{justModify:!0,modifier:function(e,t){e.self.innerHTML=t}});